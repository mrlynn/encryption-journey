{
  "sessionId": "demo-session-001",
  "createdAt": "2024-01-15T10:30:00.000Z",
  "description": "Complete patient record creation and retrieval workflow with Queryable Encryption",
  "events": [
    {
      "id": "550e8400-e29b-41d4-a716-446655440000",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:00.000Z",
      "phase": "CLIENT_ENCRYPT",
      "actor": "client",
      "verb": "create",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Smi***"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "***-**-1234"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "1990-05-15"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted medical history"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "INS***789"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "encryptionLibrary": "mongodb-client-side-encryption",
        "keyProvider": "aws-kms",
        "browser": "Chrome 120.0"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440001",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:01.500Z",
      "phase": "API_RECEIVE",
      "actor": "api",
      "verb": "create",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "endpoint": "/api/patients",
        "method": "POST",
        "userAgent": "Mozilla/5.0...",
        "ipAddress": "192.168.1.100"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "b2c3d4e5f6a789012345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440002",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:02.000Z",
      "phase": "DRIVER_SEND",
      "actor": "driver",
      "verb": "create",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "driver": "mongodb-php-driver",
        "version": "1.15.0",
        "connectionPool": "main",
        "operation": "insertOne"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "c3d4e5f6a7b89012345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440003",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:02.500Z",
      "phase": "MONGO_STORE",
      "actor": "mongo",
      "verb": "create",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "collection": "patients",
        "database": "securehealth",
        "indexes": ["qe_lastName_v1", "qe_ssn_v1", "det_dateOfBirth_v1"],
        "storageEngine": "WiredTiger"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "d4e5f6a7b8c9012345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440004",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:05.000Z",
      "phase": "CLIENT_ENCRYPT",
      "actor": "client",
      "verb": "query",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Smi***"
        }
      ],
      "payloadSizeBytes": 256,
      "meta": {
        "queryType": "equality",
        "searchTerm": "Smith",
        "browser": "Chrome 120.0"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "e5f6a7b8c9d012345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440005",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:05.500Z",
      "phase": "API_RECEIVE",
      "actor": "api",
      "verb": "query",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted query"
        }
      ],
      "payloadSizeBytes": 256,
      "meta": {
        "endpoint": "/api/patients/search",
        "method": "GET",
        "queryParams": "lastName=Smith"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "f6a7b8c9d0e12345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440006",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:06.000Z",
      "phase": "DRIVER_SEND",
      "actor": "driver",
      "verb": "query",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted query"
        }
      ],
      "payloadSizeBytes": 256,
      "meta": {
        "driver": "mongodb-php-driver",
        "version": "1.15.0",
        "connectionPool": "main",
        "operation": "find"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "a7b8c9d0e1f2345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440007",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:06.500Z",
      "phase": "MONGO_MATCH_QE",
      "actor": "mongo",
      "verb": "query",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted query"
        }
      ],
      "payloadSizeBytes": 256,
      "meta": {
        "collection": "patients",
        "database": "securehealth",
        "index": "qe_lastName_v1",
        "queryType": "equality",
        "matchCount": 1,
        "executionTimeMs": 15
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "b8c9d0e1f2a345678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440008",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:07.000Z",
      "phase": "MONGO_READ",
      "actor": "mongo",
      "verb": "read",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "collection": "patients",
        "database": "securehealth",
        "documentId": "507f1f77bcf86cd799439011",
        "readConcern": "majority"
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "c9d0e1f2a3b45678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440009",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:07.500Z",
      "phase": "DRIVER_RECEIVE",
      "actor": "driver",
      "verb": "read",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "driver": "mongodb-php-driver",
        "version": "1.15.0",
        "connectionPool": "main",
        "operation": "find",
        "resultCount": 1
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "d0e1f2a3b4c5678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440010",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:08.000Z",
      "phase": "API_RESPOND",
      "actor": "api",
      "verb": "read",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Encrypted field"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "Encrypted field"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "endpoint": "/api/patients/search",
        "method": "GET",
        "statusCode": 200,
        "responseTimeMs": 150
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "e1f2a3b4c5d678901234567890abcdef1234567890abcdef123456"
    },
    {
      "id": "550e8400-e29b-41d4-a716-446655440011",
      "sessionId": "demo-session-001",
      "ts": "2024-01-15T10:30:08.500Z",
      "phase": "CLIENT_DECRYPT",
      "actor": "client",
      "verb": "read",
      "dataset": "patient",
      "fields": [
        {
          "name": "patient.firstName",
          "encryption": "none",
          "visibleSample": "John"
        },
        {
          "name": "patient.lastName",
          "encryption": "qe",
          "visibleSample": "Smith"
        },
        {
          "name": "patient.ssn",
          "encryption": "qe",
          "visibleSample": "123-45-6789"
        },
        {
          "name": "patient.dateOfBirth",
          "encryption": "det",
          "visibleSample": "1990-05-15"
        },
        {
          "name": "patient.medicalNotes",
          "encryption": "rand",
          "visibleSample": "Patient has diabetes, well controlled with medication"
        },
        {
          "name": "patient.insuranceId",
          "encryption": "qe",
          "visibleSample": "INS123456789"
        }
      ],
      "payloadSizeBytes": 2048,
      "meta": {
        "decryptionLibrary": "mongodb-client-side-encryption",
        "keyProvider": "aws-kms",
        "browser": "Chrome 120.0",
        "decryptionTimeMs": 25
      },
      "keyRef": {
        "alias": "securehealth/patient",
        "version": 3
      },
      "signature": "f2a3b4c5d6e78901234567890abcdef1234567890abcdef123456"
    }
  ]
}
